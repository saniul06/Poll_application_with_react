(this.webpackJsonppoll=this.webpackJsonppoll||[]).push([[0],{29:function(e,t,o){},30:function(e,t,o){},50:function(e,t,o){"use strict";o.r(t);var n=o(3),i=o.n(n),s=o(14),l=o.n(s),a=(o(29),o.p,o(30),o(1));var r=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,67)).then((function(t){var o=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,l=t.getTTFB;o(e),n(e),i(e),s(e),l(e)}))},c=(o(32),o(20)),p=o(8),d=o(9),h=o(11),u=o(10),j=o(62),b=o(63),O=o(64),g=o(65),v=o(59),f=o(60),m=o(51),x=o(52),y=o(53),P=o(54),w=function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(){return Object(p.a)(this,o),t.apply(this,arguments)}return Object(d.a)(o,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(m.a,{className:"p-2",style:{background:"#ddd"},children:[Object(a.jsx)(x.a,{className:"my-2 d-block bg-primary",onClick:this.props.toggleModal,children:"Create new poll"}),Object(a.jsx)(y.a,{className:"my-2",value:this.props.searchTerm,placeholder:"search poll ...",onChange:function(t){return e.props.handleSearch(t.target.value)}}),Object(a.jsx)("h3",{className:"my-3",children:"List of polls"}),this.props.polls.map((function(t){return Object(a.jsx)(P.a,{className:"p-3",onClick:function(){return e.props.selectPoll(t.id)},style:{cursor:"pointer"},children:t.title},t.id)}))]})}}]),o}(n.Component),S=o(17),C=o(55),k=o(56),N=o(57),M=o(58),A=o(13),V=o.n(A),D=function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(p.a)(this,o);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={title:"",description:"",options:[],errors:{}},e.handleChange=function(t){e.setState(Object(S.a)({},t.target.name,t.target.value))},e.addOption=function(){if(5===e.state.options.length)return alert("you can have add max 5 options");var t={};t.id=V.a.generate(),t.value="",t.vote=0,e.setState({options:e.state.options.concat(t)})},e.deleteOption=function(t){var o=e.state.options;if(2==o.length)return alert("Atleaset 2 options required");o.splice(t,1),e.setState({options:o})},e.handleOptionChange=function(t,o){var n=e.state.options;n[o].value=t.target.value,e.setState({options:n})},e.validate=function(t){var o={},n=e.state,i=n.title,s=n.description,l=n.options;i||(o.title="Title is required"),s||(o.description="Description is required");var a=[];return l.forEach((function(e,t){e.value||(a[t]="Field is required")})),a.length>0&&(o.options=a),{isValid:0===Object.keys(o).length,errors:o}},e.submitPoll=function(t){t.preventDefault(),console.log("this.state.title: :",e.state.title);var o=e.validate(),n=o.isValid,i=o.errors;n?e.props.isUpdate?(e.props.poll.title=e.state.title,e.props.poll.description=e.state.description,e.props.poll.options=e.state.options,e.props.submit(e.props.poll),console.log("submitted"),e.props.toggleModal(),alert("Poll updated successfully")):(e.props.submit({id:V.a.generate(),title:e.state.title,description:e.state.description,options:e.state.options,totalVote:0,opinions:[],created:new Date}),e.setState({title:"",description:"",options:[],errors:{}}),t.target.reset(),console.log("submitted"),e.props.toggleModal(),alert("Poll added successfully")):e.setState({errors:i})},e}return Object(d.a)(o,[{key:"componentDidMount",value:function(){var e=[{id:V.a.generate(),value:"",vote:0},{id:V.a.generate(),value:"",vote:0}];if(this.setState({options:e}),console.log("title in form :",this.state.title),this.props.poll&&Object.keys(this.props.poll).length>0){var t=this.props.poll,o=t.title,n=t.description,i=t.options;this.setState({title:o,description:n,options:i})}}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(C.a,{onSubmit:this.submitPoll,children:[Object(a.jsxs)(k.a,{children:[Object(a.jsx)(N.a,{id:"title",children:"Title"}),Object(a.jsx)(y.a,{id:"title",onChange:this.handleChange,name:"title",value:this.state.title,invalid:!!this.state.errors.title}),Object(a.jsx)(M.a,{children:this.state.errors.title})]}),Object(a.jsxs)(k.a,{children:[Object(a.jsx)(N.a,{id:"description",children:"Description"}),Object(a.jsx)(y.a,{id:"description",onChange:this.handleChange,name:"description",value:this.state.description,invalid:!!this.state.errors.description}),Object(a.jsx)(M.a,{children:this.state.errors.description})]}),Object(a.jsx)(x.a,{onClick:this.addOption,children:"Add Option"}),Object(a.jsx)(k.a,{children:this.state.options.map((function(t,o){return Object(a.jsxs)("div",{className:"d-flex my-1",children:[Object(a.jsx)(y.a,{placeholder:"add option here",value:e.state.options[o].value,onChange:function(t){return e.handleOptionChange(t,o)},invalid:!(!e.state.errors.options||!e.state.errors.options[o])}),Object(a.jsx)(x.a,{color:"danger",type:"button",onClick:function(){return e.deleteOption(o)},children:"Delete"})]},t.id)}))}),Object(a.jsx)(x.a,{children:this.props.buttonValue})]})}}]),o}(n.Component),F=function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(p.a)(this,o);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={searchTerm:""},e.handleSearch=function(t){e.setState({searchTerm:t,openForm:!1})},e.toggleModal=function(){e.setState({openForm:!e.state.openForm})},e}return Object(d.a)(o,[{key:"render",value:function(){var e=this,t=this.props.polls.filter((function(t){return t.title.toLowerCase().includes(e.state.searchTerm.toLowerCase())}));return Object(a.jsxs)("div",{children:[Object(a.jsx)(w,{polls:t,selectPoll:this.props.selectPoll,searchTerm:this.state.searchTerm,handleSearch:this.handleSearch,toggleModal:this.toggleModal}),Object(a.jsxs)(g.a,{isOpen:this.state.openForm,toggle:this.toggleModal,children:[Object(a.jsx)(v.a,{toggle:this.toggleModal,children:"Add new poll"}),Object(a.jsx)(f.a,{children:Object(a.jsx)(D,{submit:this.props.addNewPoll,buttonValue:"Add poll",toggleModal:this.toggleModal})})]})]})}}]),o}(n.Component),T=o(66),R=o(61),I=function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(p.a)(this,o);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={name:"",selectedOption:"",errors:"",opinions:[],bg:"all",pollId:""},e.handleChange=function(t){e.setState(Object(S.a)({},t.target.name,t.target.value))},e.validate=function(){var t={};return e.state.name||(t.name="Please Provide your name"),e.state.selectedOption||(t.selectedOption="Please select one item"),{isValid:0===Object.keys(t).length,errors:t}},e.submitOpinion=function(t){t.preventDefault();var o=e.validate(),n=o.isValid,i=o.errors;if(n){var s={};s.id=V.a.generate(),s.pollId=e.props.poll.id,s.name=e.state.name,s.selectedOption=e.state.selectedOption,e.props.getOpinion(s),e.setState({name:"",selectedOption:"",errors:"",bg:"all"})}else e.setState({errors:i,name:"",selectedOption:"",isChecked:!1})},e.getSingleOpinion=function(t){e.setState({bg:t}),e.props.showOpinion(e.props.poll.id,t)},e.getAllOpinios=function(){e.setState({bg:"all"}),e.props.showOpinion(e.props.poll)},e}return Object(d.a)(o,[{key:"componentDidMount",value:function(){this.setState({errors:""})}},{key:"componentWillReceiveProps",value:function(e){this.setState({pollId:e.poll.id}),e.selectedPoll.id!==this.state.pollId&&this.setState({bg:"all"}),console.log(e.selectedPoll)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsxs)(C.a,{onSubmit:this.submitOpinion,style:{padding:"10px",borderRadius:"10px"},children:[Object(a.jsxs)("div",{className:"d-flex mb-2",children:[Object(a.jsx)("h5",{children:"Options"}),Object(a.jsx)(x.a,{onClick:this.props.toggleModal,className:"ml-auto",color:"warning",children:"Edit poll"}),Object(a.jsx)(x.a,{onClick:function(){return e.props.deletePoll(e.props.selectedPoll.id)},color:"danger",children:"Delete poll"})]}),this.props.poll.options.map((function(t){return Object(a.jsx)(k.a,{children:Object(a.jsxs)(N.a,{className:"d-flex",style:{padding:"5px",background:"#fff",borderRadius:"10px"},children:[Object(a.jsx)(T.a,{id:t.id,type:"radio",name:"selectedOption",value:t.id,onClick:e.handleChange,invalid:!!e.state.errors.selectedOption}),t.value,Object(a.jsx)("span",{style:{padding:"5px 20px",background:"green",color:"white",borderRadius:"5px"},className:"ml-auto",children:t.vote}),Object(a.jsxs)("span",{style:{padding:"5px 20px",background:"orange",color:"black",borderRadius:"5px"},children:[e.props.poll.totalVote?(100*t.vote/e.props.poll.totalVote).toFixed(2):0," ","%"]})]})},t.id)})),Object(a.jsxs)(k.a,{children:[Object(a.jsx)(N.a,{children:"Enter your Name"}),Object(a.jsx)(y.a,{name:"name",value:this.state.name,onChange:this.handleChange,placeholder:"enter your name",invalid:!!this.state.errors.name}),this.state.errors.name&&Object(a.jsx)(M.a,{children:this.state.errors.name})]}),Object(a.jsx)("button",{className:"btn btn-info",children:"Submit"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{className:"my-2",children:"See who votes for each opinion"}),Object(a.jsxs)(R.a,{children:[Object(a.jsx)(x.a,{onClick:this.getAllOpinios,className:"all"===this.state.bg?"bg-success":"",children:"All"},this.props.poll.id),this.props.poll.options.map((function(t){return Object(a.jsx)(x.a,{className:e.state.bg===t.id?"bg-success":"",onClick:function(){return e.getSingleOpinion(t.id)},children:t.value},t.id)}))]}),Object(a.jsx)("p",{className:"mt-3",children:"Name of the voters"}),Object(a.jsx)(m.a,{children:this.props.opinion&&this.props.opinion.length>0?this.props.opinion.map((function(e){return Object(a.jsx)(P.a,{children:e.name},e.id)})):"There is no vote"})]})]})}}]),o}(n.Component),W=function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(p.a)(this,o);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={openForm:!1},e.toggleModal=function(){e.setState({openForm:!e.state.openForm})},e}return Object(d.a)(o,[{key:"render",value:function(){if(Object.keys(this.props.selectedPoll).length>0){var e=this.props.selectedPoll;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{fontWeight:"bold"},children:"Poll title: "}),e.title]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{fontWeight:"bold"},children:"Poll description: "}),e.description]}),Object(a.jsx)(I,{poll:e,getOpinion:this.props.getOpinion,showOpinion:this.props.showOpinion,opinion:this.props.opinion,toggleModal:this.toggleModal,deletePoll:this.props.deletePoll,selectedPoll:this.props.selectedPoll}),Object(a.jsxs)(g.a,{isOpen:this.state.openForm,toggle:this.toggleModal,children:[Object(a.jsx)(v.a,{toggle:this.toggleModal,children:"Update Poll"}),Object(a.jsx)(f.a,{children:Object(a.jsx)(D,{submit:this.props.updatePoll,poll:e,isUpdate:!0,buttonValue:"Update poll",toggleModal:this.toggleModal})})]})]})}return 0===Object.keys(this.props.data).length?Object(a.jsx)("h3",{children:"No Poll found.Create a new poll"}):Object(a.jsx)("h3",{children:"Please select a poll from left menu"})}}]),o}(n.Component),J=[{id:"1",title:"What is your favorite programming language",description:"There are lot of programming language in this world.Among them what is your favorite?",options:[{id:"123",value:"C",vote:0},{id:"124",value:"C++",vote:0},{id:"125",value:"Javascript",vote:0},{id:"126",value:"Rust",vote:0}],created:new Date,totalVote:0,opinions:[]},{id:2,title:"Which frontend framwork do you prefer",description:"There are lot of frontend frarework in Javascript.Among them what is your favorite?",options:[{id:"222",value:"React js",vote:0},{id:"333",value:"Angular js",vote:0},{id:"444",value:"Vue js",vote:0},{id:"555",value:"Svelte",vote:0}],created:new Date,totalVote:0,opinions:[]},{id:3,title:"What is the best way to create android app",description:"There are lot of ways to crate an android app.So which one you prefer",options:[{id:"44",value:"Java",vote:0},{id:"332",value:"React native",vote:0},{id:"321",value:"Kotlin",vote:0}],created:new Date,totalVote:0,opinions:[]}],L=function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(p.a)(this,o);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={polls:[],selectedPoll:{},showOpinion:[]},e.all="all",e.selectPoll=function(t){var o=e.state.polls.find((function(e){return e.id===t}));e.setState({selectedPoll:o,showOpinion:Object(c.a)(o.opinions)})},e.getOpinion=function(t){var o=e.state.polls,n=o.find((function(e){return e.id===t.pollId}));n.options.find((function(e){return e.id===t.selectedOption})).vote++,n.totalVote++,n.opinions.push(t),e.setState({polls:o},(function(){return e.setState({showOpinion:Object(c.a)(e.state.selectedPoll.opinions)})}))},e.addNewPoll=function(t){e.setState({polls:e.state.polls.concat(t)})},e.showOpinion=function(t,o){if(!o)return e.setState({showOpinion:t.opinions});var n=e.state.polls.find((function(e){return e.id===t})).opinions.filter((function(e){return e.selectedOption===o}));e.setState({showOpinion:n})},e.updatePoll=function(t){var o=e.state.polls,n=o.find((function(e){return e.id===t.id}));n.title=t.title,n.description=t.description,n.options=t.options,e.setState({polls:o})},e.deletePoll=function(t){var o=e.state.polls.filter((function(e){return e.id!==t}));e.setState({polls:o,selectedPoll:{}})},e}return Object(d.a)(o,[{key:"componentDidMount",value:function(){this.setState({polls:J,selectedPoll:J[0]})}},{key:"render",value:function(){return Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h3",{className:"text-center",children:"Poll application"}),Object(a.jsx)("hr",{}),Object(a.jsxs)(b.a,{children:[Object(a.jsx)(O.a,{md:4,children:Object(a.jsx)(F,{polls:this.state.polls,selectPoll:this.selectPoll,addNewPoll:this.addNewPoll})}),Object(a.jsx)(O.a,{md:8,children:Object(a.jsx)(W,{selectedPoll:this.state.selectedPoll,getOpinion:this.getOpinion,all:this.all,showOpinion:this.showOpinion,opinion:this.state.showOpinion,updatePoll:this.updatePoll,deletePoll:this.deletePoll,data:this.state.polls})})]})]})}}]),o}(n.Component);l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root")),r()}},[[50,1,2]]]);
//# sourceMappingURL=main.699c1b92.chunk.js.map